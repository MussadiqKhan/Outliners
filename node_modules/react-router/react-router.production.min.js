import{createMemoryHistory as e,parsePath as t}from"history";import{createContext as n,useRef as r,createElement as l,useContext as a,useEffect as i,useState as u,useMemo as c,useCallback as o,Children as s,isValidElement as p,Fragment as h,useTransition as f}from"react";function m(e,t){if(!e)throw Error(t)}let d=n({history:null,location:null,pending:!1,static:!1}),g=n({outlet:null,params:{},pathname:"",route:null});function v(){return j()}let y=e=>e(),R=f||(()=>[y,!1]);function $({children:e=null,history:t,static:n=!1,timeout:a=2e3}){x()&&m(!1);let[i,c]=u(t.location),[o,s]=R({timeoutMs:a});return(a=r(!n)).current&&(a.current=!1,t.listen(({location:e})=>{o(()=>{c(e)})})),l(d.Provider,{children:e,value:{history:t,location:i,pending:s,static:n}})}function x(){return null!=a(d).location}function E(){return x()||m(!1),a(d).location}function S(){x()||m(!1);let e=a(d),t=e.history,n=e.pending,{pathname:l}=a(g),u=r(!1);return i(()=>{u.current=!0}),o((e,r={})=>{u.current&&("number"==typeof e?t.go(e):(e=k(e,l),(r.replace||n?t.replace:t.push)(e,r.state)))},[t,l,n])}function j(){return a(g).outlet}function w(e){let{pathname:t}=a(g);return c(()=>k(e,t),[e,t])}function b(e,t=""){let{pathname:n,params:r}=a(g);t=t?[n,t].join("/").replace(/\/\/+/g,"/"):n;let i=E(),u=c(()=>W(e,i,t),[i,e,t]);return u?u.reduceRight((e,{params:n,pathname:a,route:i})=>l(g.Provider,{children:i.element,value:{outlet:e,params:{...r,...n},pathname:[t,a].join("/").replace(/\/\/+/g,"/"),route:i}}),null):null}function I(e){return e.map(e=>{let t={caseSensitive:!0===e.caseSensitive,element:e.element||l(v,null),path:e.path||"/"};return e.children&&(t.children=I(e.children)),t})}function O(e){let t=[];return s.forEach(e,e=>{if(p(e))if(e.type===h)t.push.apply(t,O(e.props.children));else{var n={caseSensitive:!0===e.props.caseSensitive,element:e,path:e.props.path||"/"};e.props.children&&((e=O(e.props.children)).length&&(n.children=e)),t.push(n)}}),t}function W(e,n,r=""){if("string"==typeof n&&(n=t(n)),n=n.pathname||"/",r){if(r=r.replace(/^\/*/,"/").replace(/\/+$/,""),!n.startsWith(r))return null;n=n===r?"/":n.slice(r.length)}!function(e){let t=e.reduce((e,[t])=>(e[t]=function(e){let t=(e=e.split("/")).length;return e.some(L)&&(t+=-2),e.filter(e=>"*"!==e).reduce((e,t)=>e+(C.test(t)?2:""===t?1:10),t)}(t),e),{});!function(e,t){let n=e.slice(0);e.sort((e,r)=>t(e,r)||n.indexOf(e)-n.indexOf(r))}(e,(e,n)=>{let[r,,l]=e;e=t[r];let[a,,i]=n;return e!==(n=t[a])?n-e:function(e,t){return e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n])?e[e.length-1]-t[t.length-1]:0}(l,i)})}(e=function e(t,n=[],r="",l=[],a=[]){return t.forEach((t,i)=>{let u=[r,t.path].join("/").replace(/\/\/+/g,"/"),c=l.concat(t);i=a.concat(i),t.children&&e(t.children,n,u,c,i),n.push([u,c,i])}),n}(e));var l=null;for(r=0;null==l&&r<e.length;++r)e:{l=n;let t=e[r][1],i="/",u={},c=[];for(let e=0;e<t.length;++e){let n=t[e];var a="/"===i?l:l.slice(i.length)||"/";if(!(a=P({path:n.path,caseSensitive:n.caseSensitive,end:e===t.length-1},a))){l=null;break e}i=[i,a.pathname].join("/").replace(/\/\/+/g,"/"),u={...u,...a.params},c.push({route:n,pathname:i,params:u})}l=c}return l}let C=/^:\w+$/,L=e=>"*"===e;function P(e,t){"string"==typeof e&&(e={path:e});let{path:n,caseSensitive:r=!1,end:l=!0}=e,[a,i]=function(e,t,n){let r=[],l="^("+e.replace(/^\/*/,"/").replace(/\/?\*?$/,"").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(e,t)=>(r.push(t),"([^\\/]+)"))+")";return e.endsWith("*")?(e.endsWith("/*")&&(l+="\\/?"),r.push("*"),l+="(.*)"):n&&(l+="\\/?"),n&&(l+="$"),[new RegExp(l,t?void 0:"i"),r]}(n,r,l);if(!(t=t.match(a)))return null;e=t[1];let u=t.slice(2);return t=i.reduce((e,t,n)=>{n=u[n];try{var r=decodeURIComponent(n.replace(/\+/g," "))}catch(l){r=n}return e[t]=r,e},{}),{path:n,pathname:e,params:t}}function k(e,n="/"){let{pathname:r,search:l="",hash:a=""}="string"==typeof e?t(e):e;return{pathname:r?F(r,r.startsWith("/")?"/":n):n,search:l,hash:a}}function F(e,t){let n=t.replace(/\/+$/,"").replace(/\/\/+/g,"/").split("/");return e.replace(/\/\/+/g,"/").split("/").forEach(e=>{".."===e?1<n.length&&n.pop():"."!==e&&n.push(e)}),1<n.length?n.join("/").replace(/\/\/+/g,"/"):"/"}function A({children:t,initialEntries:n,initialIndex:a,timeout:i}){let u=r(null);return null==u.current&&(u.current=e({initialEntries:n,initialIndex:a})),l($,{children:t,history:u.current,timeout:i})}function H({to:e,replace:t,state:n}){x()||m(!1),a(d);let r=S();return i(()=>{r(e,{replace:t,state:n})}),null}function M({element:e=l(v,null)}){return e}function N({basename:e="",children:t}){return b(t=O(t),e)}function T(e,t={}){return e.replace(/:(\w+)/g,(e,n)=>t[n]||":"+n).replace(/\*$/,e=>t[e]||e)}function U(e,t=!0){x()||m(!1);let n=a(d).history;i(()=>{if(t){var r=n.block(t=>{e({...t,retry(){r(),t.retry()}})});return r}},[n,t,e])}function q(e){x()||m(!1);let t=a(d).history;return e=w(e),t.createHref(e)}function z(){return a(d).pending}function B(e){return x()||m(!1),P(e,E().pathname)}function D(){return a(g).params}function G(e,t=""){return x()||m(!1),b(c(()=>I(e),[e]),t)}export{A as MemoryRouter,H as Navigate,v as Outlet,M as Route,$ as Router,N as Routes,I as createRoutesFromArray,O as createRoutesFromChildren,T as generatePath,P as matchPath,W as matchRoutes,k as resolveLocation,U as useBlocker,q as useHref,x as useInRouterContext,E as useLocation,z as useLocationPending,B as useMatch,S as useNavigate,j as useOutlet,D as useParams,w as useResolvedLocation,G as useRoutes};
//# sourceMappingURL=react-router.production.min.js.map
