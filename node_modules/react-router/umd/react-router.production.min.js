"use strict";!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("history")):"function"==typeof define&&define.amd?define(["exports","react","history"],t):t((e=e||self).ReactRouter={},e.React,e.HistoryLibrary)}(this,(function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e,t){if(!e)throw Error(t)}function i(){return l()}function o(e){var n=e.children;n=void 0===n?null:n;var r=e.history,i=e.static;i=void 0!==i&&i;var o=void 0===(e=e.timeout)?2e3:e;a()&&u(!1);var c=t.useState(r.location);e=c[0];var s=c[1],l=(o=E({timeoutMs:o}))[0];return o=o[1],(c=t.useRef(!i)).current&&(c.current=!1,r.listen((function(e){var t=e.location;l((function(){s(t)}))}))),t.createElement(x.Provider,{children:n,value:{history:r,location:e,pending:o,static:i}})}function a(){return null!=t.useContext(x).location}function c(){return a()||u(!1),t.useContext(x).location}function s(){a()||u(!1);var e=t.useContext(x),n=e.history,r=e.pending,i=t.useContext(C).pathname,o=t.useRef(!1);return t.useEffect((function(){o.current=!0})),t.useCallback((function(e,t){void 0===t&&(t={}),o.current&&("number"==typeof e?n.go(e):(e=g(e,i),(t.replace||r?n.replace:n.push)(e,t.state)))}),[n,i,r])}function l(){return t.useContext(C).outlet}function f(e){var n=t.useContext(C).pathname;return t.useMemo((function(){return g(e,n)}),[e,n])}function p(e,n){void 0===n&&(n="");var u=t.useContext(C),i=u.pathname,o=u.params;n=n?w([i,n]):i;var a=c();return(u=t.useMemo((function(){return d(e,a,n)}),[a,e,n]))?u.reduceRight((function(e,u){var i=u.pathname,a=u.route;return t.createElement(C.Provider,{children:a.element,value:{outlet:e,params:r({},o,{},u.params),pathname:w([n,i]),route:a}})}),null):null}function h(e){return e.map((function(e){var n={caseSensitive:!0===e.caseSensitive,element:e.element||t.createElement(i,null),path:e.path||"/"};return e.children&&(n.children=h(e.children)),n}))}function v(e){var n=[];return t.Children.forEach(e,(function(e){if(t.isValidElement(e))if(e.type===t.Fragment)n.push.apply(n,v(e.props.children));else{var r={caseSensitive:!0===e.props.caseSensitive,element:e,path:e.props.path||"/"};e.props.children&&((e=v(e.props.children)).length&&(r.children=e)),n.push(r)}})),n}function d(e,t,u){if(void 0===u&&(u=""),"string"==typeof t&&(t=n.parsePath(t)),t=t.pathname||"/",u){if(u=u.replace(/^\/*/,"/").replace(/\/+$/,""),!t.startsWith(u))return null;t=t===u?"/":t.slice(u.length)}!function(e){var t=e.reduce((function(e,t){return e[t=t[0]]=function(e){var t=(e=e.split("/")).length;return e.some($)&&(t+=S),e.filter((function(e){return!$(e)})).reduce((function(e,t){return e+(b.test(t)?P:""===t?M:O)}),t)}(t),e}),{});!function(e,t){var n=e.slice(0);e.sort((function(e,r){return t(e,r)||n.indexOf(e)-n.indexOf(r)}))}(e,(function(e,n){var r=e[2];e=t[e[0]];var u=n[2];return e!==(n=t[n[0]])?n-e:function(e,t){return e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}))?e[e.length-1]-t[t.length-1]:0}(r,u)}))}(e=function e(t,n,r,u,i){return void 0===n&&(n=[]),void 0===r&&(r=""),void 0===u&&(u=[]),void 0===i&&(i=[]),t.forEach((function(t,o){var a=w([r,t.path]),c=u.concat(t);o=i.concat(o),t.children&&e(t.children,n,a,c,o),n.push([a,c,o])})),n}(e));var i=null;for(u=0;null==i&&u<e.length;++u)e:{i=t;for(var o=e[u][1],a="/",c={},s=[],l=0;l<o.length;++l){var f=o[l],p="/"===a?i:i.slice(a.length)||"/";if(!(p=m({path:f.path,caseSensitive:f.caseSensitive,end:l===o.length-1},p))){i=null;break e}a=w([a,p.pathname]),c=r({},c,{},p.params),s.push({route:f,pathname:a,params:c})}i=s}return i}function m(e,t){"string"==typeof e&&(e={path:e});var n=e;e=n.path;var r=n.caseSensitive;if(n=function(e,t,n){var r=[],u="^("+e.replace(/^\/*/,"/").replace(/\/?\*?$/,"").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}))+")";return e.endsWith("*")?(e.endsWith("/*")&&(u+="\\/?"),r.push("*"),u+="(.*)"):n&&(u+="\\/?"),n&&(u+="$"),[new RegExp(u,t?void 0:"i"),r]}(e,void 0!==r&&r,void 0===(n=n.end)||n),r=n[1],!(n=t.match(n[0])))return null;t=n[1];var u=n.slice(2);return r=r.reduce((function(e,t,n){n=u[n];try{var r=decodeURIComponent(n.replace(/\+/g," "))}catch(e){r=n}return e[t]=r,e}),{}),{path:e,pathname:t,params:r}}function g(e,t){void 0===t&&(t="/");var r="string"==typeof e?n.parsePath(e):e;e=r.pathname;var u=r.search;return u=void 0===u?"":u,r=void 0===(r=r.hash)?"":r,{pathname:e?y(e,e.startsWith("/")?"/":t):t,search:u,hash:r}}function y(e,t){var n=t.replace(/\/+$/,"").replace(/\/\/+/g,"/").split("/");return e.replace(/\/\/+/g,"/").split("/").forEach((function(e){".."===e?1<n.length&&n.pop():"."!==e&&n.push(e)})),1<n.length?w(n):"/"}var x=t.createContext({history:null,location:null,pending:!1,static:!1}),C=t.createContext({outlet:null,params:{},pathname:"",route:null}),R=function(e){return e()},E=t.useTransition||function(){return[R,!1]},b=/^:\w+$/,P=2,M=1,O=10,S=-2,$=function(e){return"*"===e},w=function(e){return e.join("/").replace(/\/\/+/g,"/")};e.MemoryRouter=function(e){var r=e.children,u=e.initialEntries,i=e.initialIndex;e=e.timeout;var a=t.useRef(null);return null==a.current&&(a.current=n.createMemoryHistory({initialEntries:u,initialIndex:i})),t.createElement(o,{children:r,history:a.current,timeout:e})},e.Navigate=function(e){var n=e.to,r=e.replace,i=e.state;a()||u(!1),t.useContext(x);var o=s();return t.useEffect((function(){o(n,{replace:r,state:i})})),null},e.Outlet=i,e.Route=function(e){return void 0===(e=e.element)?t.createElement(i,null):e},e.Router=o,e.Routes=function(e){var t=e.basename;return t=void 0===t?"":t,p(e=v(e.children),t)},e.createRoutesFromArray=h,e.createRoutesFromChildren=v,e.generatePath=function(e,t){return void 0===t&&(t={}),e.replace(/:(\w+)/g,(function(e,n){return t[n]||":"+n})).replace(/\*$/,(function(e){return t[e]||e}))},e.matchPath=m,e.matchRoutes=d,e.resolveLocation=g,e.useBlocker=function(e,n){void 0===n&&(n=!0),a()||u(!1);var i=t.useContext(x).history;t.useEffect((function(){if(n){var t=i.block((function(n){var u=r({},n,{retry:function(){t(),n.retry()}});e(u)}));return t}}),[i,n,e])},e.useHref=function(e){a()||u(!1);var n=t.useContext(x).history;return e=f(e),n.createHref(e)},e.useInRouterContext=a,e.useLocation=c,e.useLocationPending=function(){return t.useContext(x).pending},e.useMatch=function(e){return a()||u(!1),m(e,c().pathname)},e.useNavigate=s,e.useOutlet=l,e.useParams=function(){return t.useContext(C).params},e.useResolvedLocation=f,e.useRoutes=function(e,n){return void 0===n&&(n=""),a()||u(!1),p(t.useMemo((function(){return h(e)}),[e]),n)},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=react-router.production.min.js.map
